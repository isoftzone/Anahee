import{u as W,aM as Y,r as s,s as Z,aL as o,aJ as n,j as c,b as a}from"./index-9e8b7361.js";import{I as R}from"./IconPhoneCall-2686d5a9.js";import{I as X}from"./IconMessageDots-5ad912fc.js";import{N as ee}from"./index-89838f64.js";import{s as te}from"./sortBy-49fdc468.js";import"./floating-ui.dom-f8530855.js";import"./_defineProperty-9dff4580.js";const me=()=>{const N=W(),I=Y(),r=new URLSearchParams(I.search).get("category"),[d,u]=s.useState(1),v=[10,20,30,50,100],[m,A]=s.useState(v[0]),[l,T]=s.useState({columnAccessor:"id",direction:"asc"}),[w,$]=s.useState(""),[E,P]=s.useState([]),[q,j]=s.useState([]);s.useState("");const[se,M]=s.useState(""),[p,b]=s.useState(""),[f,g]=s.useState(""),[C,y]=s.useState("Active"),[S,x]=s.useState("");s.useState([]);const[U,F]=s.useState([]),[re,L]=s.useState([]),[z,B]=s.useState(0),[k,_]=s.useState(null);s.useState({codetype:"",primekeyid:"",primename:"",sequence:"",status:"",remark:""});const[i,G]=s.useState(null);s.useEffect(()=>{const e=localStorage.getItem("userData");if(e){const t=JSON.parse(e);G(t)}},[]),s.useEffect(()=>{let e="";switch(r){case"brand":e="Brand";break;case"formName":e="FromName";break;case"control":e="Control";break;case"c_name":e="C_Name";break;case"c_type":e="C_Type";break;case"c_value":e="C_Value";break;case"product":e="Product";break;case"buyer":e="Buyer";break;case"colour":e="Colour";break;case"scolor":e="Supplier Color";break;case"category":e="Category";break;case"subCategory":e="Sub Category";break;case"group":e="Group";break;case"subGroup":e="Sub Group";break;case"material":e="Material";break;case"size":e="Size";break;case"style":e="Style";break;case"section":e="Section";break;case"season":e="Season";break;case"unit":e="Unit";break;case"packing":e="Packing";break;case"gender":e="Gender";break;case"tag":e="Tag";break;case"seller":e="Seller";break;default:e=""}$(e),N(Z(e)),u(1)},[r,N]),s.useEffect(()=>{h()},[r,d,m,l]),s.useEffect(()=>{const e=te(E,l.columnAccessor);P(l.direction==="desc"?e.reverse():e),u(1)},[l]),s.useEffect(()=>{h()},[d,m]),s.useEffect(()=>{(async()=>{try{const t=await o.get(`${n}/getCodeTypeAllData`,{params:{codetype:r}});console.log("dataaaaaaa",t.data.records),P(t.data.records)}catch(t){console.error("Error fetching data:",t)}})()},[]);const D=async e=>{try{const t=await o.get(`${n}/getNextSequence`,{params:{codetype:e}});if(!t.data||!t.data.nextSequence)throw new Error("Failed to fetch data");g(t.data.nextSequence.toString())}catch(t){console.error("Error fetching data:",t)}};s.useEffect(()=>{D(r)},[r]);const O=e=>{g(e.target.value)},J=e=>{y(e.target.value)};s.useEffect(()=>{(async()=>{const t=await o.post(`${n}/postcmb`,{TblName:"MASTER",FldName:"PRIMENAME",FldCode:"PRIMEKEYID",OrdBy:"SEQUENCE",WhFldName:"Status"},{headers:{"Content-Type":"application/json"}});j(t.data)})()},[]);const H=e=>!E.some(t=>t.primename===e),K=async e=>{e.preventDefault();try{if(!i){console.error("User is not set");return}if(!H(p)){alert("Prime name already exists");return}let t;if(k)t=await o.put(`${n}/editProducts/${k}`,{codetype:`${r}`,updatedby:`${i.name}`,primename:p,status:C,sequence:f,remark:S}),alert("Data Updated");else{if(!i){console.error("User is not set");return}t=await o.post(`${n}/addProducts`,{codetype:`${r}`,createdby:`${i.name}`,companyid:`${i.companyid}`,primename:p,status:C,sequence:f,remark:S}),alert("Data Submitted Successfully")}M(""),b(""),y(""),g(""),x(""),_(null),h(),D(r)}catch(t){console.error("Error inserting/updating data:",t)}},h=async()=>{try{const e=await o.get(`${n}/getCodeTypeData`,{params:{codetype:r,page:d,pageSize:m}});F(e.data.records),L(e.data.records),B(e.data.total),console.log("newData from api",e.data)}catch(e){console.error("Error fetching data:",e)}},Q=async e=>{try{const t=await o.delete(`${n}/deleteProducts/${e}`,{data:{codetype:r}});console.log("Delete response:",t.data),h()}catch(t){console.error("Error deleting product:",t)}},V=(e,t)=>{_(t.primekeyid.toString()),b(t.primename),y(t.status),g(t.sequence.toString()),x(t.remark),window.scrollTo({top:70,behavior:"smooth"})};return c("div",{children:[a("div",{className:"absolute inset-0",children:a("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),c("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat px-6 py-10 dark:bg-[#060818] sm:px-16",children:[a("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"image",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2"}),a("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"image",className:"absolute left-24 top-0 h-40 md:left-[30%]"}),a("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"image",className:"absolute right-0 top-0 h-[300px]"}),a("img",{src:"/assets/images/auth/polygon-object.svg",alt:"image",className:"absolute bottom-0 end-[28%]"}),a("div",{className:"relative w-full max-w-[870px] rounded-md bg-[linear-gradient(45deg,#fff9f9_0%,rgba(255,255,255,0)_25%,rgba(255,255,255,0)_75%,_#fff9f9_100%)] p-2 dark:bg-[linear-gradient(52.22deg,#0E1726_0%,rgba(14,23,38,0)_18.66%,rgba(14,23,38,0)_51.04%,rgba(14,23,38,0)_80.07%,#0E1726_100%)]",children:c("div",{className:"relative flex flex-col justify-center rounded-md bg-white/60 backdrop-blur-lg dark:bg-black/50 px-6 py-20",children:[a("div",{className:"absolute top-6 end-6"}),c("div",{className:"mx-auto w-full max-w-[440px]",children:[a("div",{className:"mb-10",children:a("h1",{className:"text-3xl font-extrabold !leading-snug text-primary md:text-4xl",children:w})}),c("form",{className:"space-y-5",onSubmit:K,children:[c("div",{className:"relative text-white-dark",children:[c("label",{children:[" Prime Name: ",a("input",{type:"text",placeholder:"Primename",value:p,onChange:e=>b(e.target.value),className:"form-input ps-10 placeholder:text-white-dark",style:{textTransform:"uppercase"}})]}),a("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:a(R,{fill:!0})})]}),c("div",{className:"relative text-white-dark",children:[a("input",{type:"text",placeholder:"Sequence",value:f,onChange:O,className:"form-input ps-10 placeholder:text-white-dark"}),a("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:a(R,{fill:!0})})]}),a("label",{htmlFor:"",children:c("select",{name:"cmbStatus",style:{width:"144px",marginLeft:"3px",border:"1px solid #e5e7eb",borderRadius:"5px"},onChange:J,value:"Active",children:[a("option",{children:"Status"}),q.map((e,t)=>a("option",{value:e.PRIMENAME,children:e.PRIMENAME},t))]})}),c("div",{className:"relative text-white-dark",children:[a("textarea",{rows:4,placeholder:"Remark",value:S,onChange:e=>x(e.target.value),className:"form-textarea resize-none ps-10 placeholder:text-white-dark",style:{textTransform:"uppercase"}}),a("span",{className:"absolute start-4 top-2.5",children:a(X,{fill:!0})})]}),a("button",{type:"submit",className:"btn btn-gradient !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:k?"Update":"Submit"})]})]})]})})]}),a("div",{className:"mt-6",children:a("div",{className:"flex justify-between mb-4",children:a("h2",{className:"text-2xl font-bold text text-danger",children:w})})}),a("div",{className:"datatables",children:a(ee,{highlightOnHover:!0,className:"whitespace-nowrap table-hover",records:U,columns:[{accessor:"primekeyid",title:"Id",sortable:!0},{accessor:"primename",title:"Prime Name",sortable:!0},{accessor:"sequence",title:"Sequence",sortable:!0},{accessor:"remark",title:"Remark",sortable:!0},{accessor:"status",title:"Status",sortable:!0},{accessor:"action",title:a("div",{style:{marginLeft:"40px"},children:"Action"}),render:e=>c("div",{className:"flex space-x-2",children:[a("button",{className:"btn btn-warning mr-2",onClick:t=>V(t,e),style:{width:"57px"},children:"Edit"}),a("button",{className:"btn btn-danger mr-2",onClick:()=>Q(e.primekeyid),style:{padding:"8px"},children:"Delete"})]})}],totalRecords:z,recordsPerPage:m,page:d,onPageChange:e=>u(e),recordsPerPageOptions:v,onRecordsPerPageChange:e=>{A(e),u(1)},sortStatus:l,onSortStatusChange:T})})]})};export{me as default};
